(()=>{var e={};e.id=285,e.ids=[285],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},37103:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(51324),r(32029),r(7629),r(12523);var t=r(23191),a=r(88716),n=r(37922),l=r.n(n),o=r(95231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(s,i);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,51324)),"/Users/anonymous/Downloads/xmas-tree/src/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,32029)),"/Users/anonymous/Downloads/xmas-tree/src/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,7629)),"/Users/anonymous/Downloads/xmas-tree/src/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,12523)),"/Users/anonymous/Downloads/xmas-tree/src/app/not-found.tsx"]}],c=["/Users/anonymous/Downloads/xmas-tree/src/app/checkout/page.tsx"],u="/checkout/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},81407:(e,s,r)=>{Promise.resolve().then(r.bind(r,37758))},35047:(e,s,r)=>{"use strict";var t=r(77389);r.o(t,"notFound")&&r.d(s,{notFound:function(){return t.notFound}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(s,{useSearchParams:function(){return t.useSearchParams}})},37758:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>d});var t=r(10326),a=r(17577),n=r(35047),l=r(77109),o=r(63232);let i=({onSuccess:e})=>{let[s,r]=(0,a.useState)(null),[n,l]=(0,a.useState)(!1),o=async s=>{s.preventDefault(),r(null),l(!0);try{await new Promise(e=>setTimeout(e,1e3)),e()}catch(e){r(e.message||"An error occurred while processing your order"),console.error("Order error:",e)}finally{l(!1)}};return t.jsx("form",{onSubmit:o,children:(0,t.jsxs)("div",{className:"mt-6",children:[s&&t.jsx("div",{className:"text-red-600 text-sm mb-4",children:s}),t.jsx("button",{type:"submit",disabled:n,className:"w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Processing...":"Place Order"})]})})};function d(){let{cart:e,clearCart:s}=(0,o.j)(),r=(0,n.useRouter)(),{data:d}=(0,l.useSession)(),[c,u]=(0,a.useState)(!0),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!0),j=e.reduce((e,s)=>e+s.price*s.quantity,0),y=j>=50?0:5.99,b=.08*j,[v,N]=(0,a.useState)({firstName:"",lastName:"",email:d?.user?.email||"",phone:"",address1:"",address2:"",city:"",state:"",postalCode:"",country:"United States"});return c?t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),t.jsx("p",{className:"mt-4",children:"Loading checkout..."})]})}):0!==e.length||h?h?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:(0,t.jsxs)("p",{className:"text-sm text-green-700",children:["Thank you for your order! A confirmation email has been sent to ",v.email,"."]})})]})}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>r.push("/"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Return to Home"})})]}):(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Checkout"}),!g&&t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-yellow-700",children:"For security reasons, please ensure you're using HTTPS in production."})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"md:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),t.jsx("div",{className:"space-y-4",children:(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email address"}),t.jsx("input",{type:"email",id:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.email,onChange:e=>N({...v,email:e.target.value}),required:!0})]})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Billing Address"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:"First name"}),t.jsx("input",{type:"text",id:"firstName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.firstName,onChange:e=>N({...v,firstName:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Last name"}),t.jsx("input",{type:"text",id:"lastName",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.lastName,onChange:e=>N({...v,lastName:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[t.jsx("label",{htmlFor:"address1",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),t.jsx("input",{type:"text",id:"address1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 mb-2",value:v.address1,onChange:e=>N({...v,address1:e.target.value}),placeholder:"Street address",required:!0}),t.jsx("input",{type:"text",id:"address2",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.address2,onChange:e=>N({...v,address2:e.target.value}),placeholder:"Apartment, suite, etc. (optional)"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),t.jsx("input",{type:"text",id:"city",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.city,onChange:e=>N({...v,city:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-700 mb-1",children:"State/Province"}),t.jsx("input",{type:"text",id:"state",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.state,onChange:e=>N({...v,state:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"postalCode",className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP/Postal code"}),t.jsx("input",{type:"text",id:"postalCode",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.postalCode,onChange:e=>N({...v,postalCode:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[t.jsx("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 mb-1",children:"Country/Region"}),(0,t.jsxs)("select",{id:"country",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.country,onChange:e=>N({...v,country:e.target.value}),required:!0,children:[t.jsx("option",{value:"United States",children:"United States"}),t.jsx("option",{value:"Canada",children:"Canada"}),t.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),t.jsx("option",{value:"Australia",children:"Australia"}),t.jsx("option",{value:"Other",children:"Other"})]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[t.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),t.jsx("input",{type:"tel",id:"phone",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",value:v.phone,onChange:e=>N({...v,phone:e.target.value}),required:!0}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"For delivery updates and order notifications"})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Payment"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-md",children:t.jsx(i,{onSuccess:()=>{p(!0),s()}})})]})]}),t.jsx("div",{children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow sticky top-4",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),(0,t.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Qty: ",e.quantity]})]}),(0,t.jsxs)("p",{className:"font-medium",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),(0,t.jsxs)("div",{className:"border-t pt-4 mt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Subtotal"}),(0,t.jsxs)("span",{children:["$",e.reduce((e,s)=>e+s.price*s.quantity,0).toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Shipping"}),(0,t.jsxs)("span",{children:[0===y?"Free":`$${y.toFixed(2)}`,j<50&&j>0&&t.jsx("span",{className:"text-xs text-green-600 ml-1",children:j>0&&`(Spend $${(50-j).toFixed(2)} more for free shipping!)`})]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Tax"}),(0,t.jsxs)("span",{children:["$",b.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between font-medium pt-2 border-t mt-2",children:[t.jsx("span",{children:"Total"}),(0,t.jsxs)("span",{children:["$",(j+y+b).toFixed(2)]})]})]})]})]})})]})]}):(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),t.jsx("div",{className:"ml-3",children:t.jsx("p",{className:"text-sm text-yellow-700",children:"We're sorry, but we can't process your payment at this time. Please add items to your cart before checking out."})})]})}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>r.push("/products"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Continue Shopping"})})]})}},51324:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(68570).createProxy)(String.raw`/Users/anonymous/Downloads/xmas-tree/src/app/checkout/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[276,77,183],()=>r(37103));module.exports=t})();