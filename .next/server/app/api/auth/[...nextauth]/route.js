"use strict";(()=>{var e={};e.id=912,e.ids=[912],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},27790:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},80665:e=>{e.exports=require("dns")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},68621:e=>{e.exports=require("punycode")},86624:e=>{e.exports=require("querystring")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},71045:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{GET:()=>c,POST:()=>c});var s=t(49303),a=t(88716),i=t(60670),n=t(75571),l=t.n(n),u=t(95456);let c=l()(u.L),p=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"/Users/anonymous/Downloads/xmas-tree/src/app/api/auth/[...nextauth]/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:h}=p,g="/api/auth/[...nextauth]/route";function f(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},69955:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0})},75571:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0});var o={};Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a.default}});var s=t(69955);Object.keys(s).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(o,e))&&(e in r&&r[e]===s[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return s[e]}}))});var a=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(void 0);if(t&&t.has(e))return t.get(e);var o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var n=s?Object.getOwnPropertyDescriptor(e,a):null;n&&(n.get||n.set)?Object.defineProperty(o,a,n):o[a]=e[a]}return o.default=e,t&&t.set(e,o),o}(t(45609));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}Object.keys(a).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(o,e))&&(e in r&&r[e]===a[e]||Object.defineProperty(r,e,{enumerable:!0,get:function(){return a[e]}}))})},95456:(e,r,t)=>{t.d(r,{L:()=>i});var o=t(53797),s=t(1926),a=t(20471);let i={providers:[(0,o.Z)({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(console.log("[NextAuth] Authorize called with:",{email:e?.email,passwordProvided:!!e?.password}),!e?.email||!e?.password)throw console.log("[NextAuth] Missing credentials"),Error("Email and password are required");let r=e.email,t=e.password;try{console.log("[NextAuth] Looking up user:",r);let e=(0,s.uw)(),{data:o,error:a}=await e.auth.signInWithPassword({email:r,password:t});if(a||!o.user)throw console.log("[NextAuth] Supabase sign-in error:",a?.message),Error(a?.message||"Invalid login credentials");let i=o.user;console.log("[NextAuth] Authentication successful for:",r);let{data:n}=await e.from("users").select("id").eq("id",i.id).single();if(!n){console.log("[NextAuth] Public profile not found. Creating one for:",i.email);let{error:r}=await e.from("users").insert({id:i.id,name:i.user_metadata.name||i.email,email:i.email});if(r)throw console.error("[NextAuth] Error creating public profile for credential user:",r),Error("Failed to create user profile after login.")}return{id:i.id,email:i.email,name:i.user_metadata.name||null,image:i.user_metadata.picture||null}}catch(e){throw console.error("[NextAuth] Authorization error:",e),e}}})],session:{strategy:"jwt",maxAge:86400},pages:{signIn:"/auth/signin",error:"/auth/error"},events:{async signIn({user:e}){if(e.email)try{let r=new Date().toLocaleString(),t=`Hello ${e.name||"Valued Customer"},

We noticed a successful login to your Indkan Christmas Tree Store account.

Details of this login:
- Time: ${r}

Best regards,
The Indkan Christmas Tree Store Security Team`,o=`
            <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; color: #333;">
              <h2 style="color: #2e7d32;">ðŸ”’ Successful Login Detected</h2>
              
              <p>Hello ${e.name||"Valued Customer"},</p>
              
              <p>We noticed a successful login to your Indkan Christmas Tree Store account.</p>

              <div style="background-color: #f5f5f5; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #2e7d32;">
                <h3 style="margin-top: 0; color: #2e7d32;">Login Details</h3>
                <p><strong>Time:</strong> ${r}</p>
              </div>
              
              
              <p style="color: #666; font-size: 0.9em;">For security reasons, this is an automated message. Please do not reply to this email.</p>
              
              <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; font-size: 12px; color: #777;">
                <p>\xa9 ${new Date().getFullYear()} Indkan Christmas Tree Store. All rights reserved.</p>
                <p>This email was sent to ${e.email} as part of our security notifications.</p>
              </div>
            </div>
          `;await (0,a.C)({to:e.email,subject:"\uD83D\uDD12 Successful Login to Indkan Christmas Tree Store Account",text:t,html:o})}catch(e){console.error("Failed to send login email:",e)}}},callbacks:{jwt:async({token:e,user:r})=>(r&&(e.id=r.id),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.id),e),redirect:async({url:e,baseUrl:r})=>e.startsWith("/")?`${r}${e}`:new URL(e).origin===r?e:r,signIn:async({user:e,account:r})=>(console.log("[NextAuth] SignIn callback called",{user:e?.email,account:r?.provider}),!0)},secret:process.env.NEXTAUTH_SECRET,debug:!1}},20471:(e,r,t)=>{t.d(r,{C:()=>s});let o=t(55245).createTransport({host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),secure:"true"===process.env.SMTP_SECURE,auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASS}});async function s({to:e,subject:r,text:t,html:s}){let a={from:`"Indkan Christmas Tree Store" <${process.env.SMTP_USER}>`,to:e,subject:r,text:t,html:s};try{let e=await o.sendMail(a);return console.log("Message sent: %s",e.messageId),e}catch(e){throw console.error("Error sending email:",e),Error("Failed to send email.")}}},1926:(e,r,t)=>{t.d(r,{fU:()=>l,pR:()=>c,uw:()=>u});var o=t(86718),s=t(71615);let a="https://nyykggssyasvxrtjhhhb.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im55eWtnZ3NzeWFzdnhydGpoaGhiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUwMjM5NDksImV4cCI6MjA3MDU5OTk0OX0.60hkCLL76yg0Bg9-W-le06lHnSwadeU74-xEpRPAqug",n=process.env.SUPABASE_SERVICE_ROLE_KEY;function l(){let e=(0,s.cookies)();return(0,o.createServerClient)(a,i,{cookies:{get:r=>e.get(r)?.value}})}function u(){let e=(0,s.cookies)();return(0,o.createServerClient)(a,n,{cookies:{get:r=>e.get(r)?.value}})}(0,o.createBrowserClient)(a,i);let c=(0,o.createServerClient)(a,n,{cookies:{get:()=>""}})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[276,219,245,857],()=>t(71045));module.exports=o})();