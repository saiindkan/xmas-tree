(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{4133:function(e,t,r){Promise.resolve().then(r.bind(r,51))},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"notFound")&&r.d(t,{notFound:function(){return n.notFound}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},51:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),a=r(6059),s=r(9376),i=r(605);function l(){let{cart:e,removeFromCart:t,clearCart:r}=(0,a.j)(),l=(0,s.useRouter)(),{data:c}=(0,i.useSession)(),u=e.reduce((e,t)=>e+t.price*t.quantity,0);return(0,n.jsxs)("main",{className:"max-w-3xl mx-auto py-12 px-4",children:[(0,n.jsx)("h1",{className:"text-3xl font-extrabold text-green-900 mb-8 text-center",children:"Your Cart"}),0===e.length?(0,n.jsx)("div",{className:"text-center text-gray-600",children:"Your cart is empty."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("ul",{className:"divide-y divide-gray-200 mb-8",children:e.map(e=>(0,n.jsxs)("li",{className:"flex items-center gap-4 py-4",children:[(0,n.jsx)("img",{src:e.img,alt:e.name,className:"w-20 h-20 object-cover rounded border"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-semibold text-green-900",children:e.name}),(0,n.jsxs)("div",{className:"text-sm text-gray-700",children:["$",e.price," \xd7 ",e.quantity]})]}),(0,n.jsx)("button",{className:"text-red-600 hover:underline text-sm",onClick:()=>t(e.id),children:"Remove"})]},e.id))}),(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{className:"text-lg font-bold text-green-900",children:["Total: $",u]}),(0,n.jsx)("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300 text-sm",onClick:r,children:"Clear Cart"})]}),(0,n.jsx)("button",{onClick:()=>{if(0!==e.length){if(!c){l.push("/auth/signin?callbackUrl=/checkout");return}l.push("/checkout")}},className:"w-full py-3 bg-green-700 text-white rounded-full font-semibold text-lg hover:bg-green-800 transition",children:"Checkout"})]})]})}},6059:function(e,t,r){"use strict";r.d(t,{Z:function(){return l},j:function(){return c}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(void 0),i="xmas_tree_shop_cart";function l(e){let{children:t}=e,[r,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{try{let e=localStorage.getItem(i);e&&l(JSON.parse(e))}catch(e){console.error("Failed to load cart from storage",e)}finally{u(!1)}},[]),(0,a.useEffect)(()=>{try{localStorage.setItem(i,JSON.stringify(r))}catch(e){console.error("Failed to save cart to storage",e)}},[r]);let o=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;l(r=>r.find(t=>t.id===e.id)?r.map(r=>r.id===e.id?{...r,quantity:r.quantity+t}:r):[...r,{...e,quantity:t}])},[]),d=(0,a.useCallback)(e=>{l(t=>t.filter(t=>t.id!==e))},[]),m=(0,a.useCallback)((e,t)=>{if(t<=0){d(e);return}l(r=>r.map(r=>r.id===e?{...r,quantity:t}:r))},[d]),x=(0,a.useCallback)(()=>{l([])},[]),f=(0,a.useCallback)(e=>{var t;return(null===(t=r.find(t=>t.id===e))||void 0===t?void 0:t.quantity)||0},[r]),h=(0,a.useCallback)(()=>r.reduce((e,t)=>e+t.price*t.quantity,0),[r]),g=(0,a.useCallback)(()=>r.reduce((e,t)=>e+t.quantity,0),[r]);return(0,n.jsx)(s.Provider,{value:{cart:r,addToCart:o,removeFromCart:d,updateQuantity:m,clearCart:x,getItemQuantity:f,getCartTotal:h,getCartItemCount:g},children:t})}function c(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[605,971,117,744],function(){return e(e.s=4133)}),_N_E=e.O()}]);